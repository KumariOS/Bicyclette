---
layout: base
---

{% include en/header.html %}

# Geofences

> Geofences (or "Monitored Regions") are one of the most interesting features available on iPhone : their job is to automatically restart an app, when approaching a predefined location, and have it perform a background task. That's what Bicyclette uses to display how many bikes and spots are available in your favorite stations, when you arrive, right on the Lock Screen. 

A few technical details:

## These are not Push Notifications

Bicyclette is automatically restarted by your iPhone: there's no incoming communication from any server. By the way, Bicyclette never asks for Push Notification authorization.

## Battery consumption is (theorically) minimal

Geofences don't use the GPS, but locate you using the cell network and nearby WiFi networks. It's a little less accurate, but a lot faster, and most importantly, it requires a lot less power from the battery.

## Some devices are not compatible

In particular, most **iPod Touch** can't use Geofences. This is a hardware limit, enforced by Apple. Howver, you can still star your favorites stations to find them quickly.

## Only 20 Regions can be monitored on an iPhone

This is a *global* limit for the device, not per app. If you go over, Bicyclette won't allow you to add new favorite stations. (You can always remove old favorites.)

## Using Wifi, Geolocation is much faster

iPhones use an offline, regularly updated, database of geolocated Wifi network identifiers. Using this, your iPhone can know its position *as soon as it detects a Wifi network*, without even needing to connect to it.

## Bicyclette has to make a network connection before displaying the occupancy

The whole scenario of a notification looks like this:


1. When a station is starred, Bicyclette registers a "Monitored Region" to iOS,
2. Later, when the iPhone detects that it enters the region, it starts Bicyclette in the background,
3. Bicyclette displays a first notification then ("Loadingâ€¦") and attempts to connect to the bikesharing system webservice to update the status of the station,
4. This network request may take some time: if your iPhone was off, the whole network stack must be restarted. On a 3G/Edge network, it can take more than a minute.
5. Once the data have been retrieved, a new notification is displayed with the occupancy details, directly on the Home or Lock Screen.

There can be several causes that would prevent notifications from showing up. Typically, when leaving a building or a tunnel, your iPhone has to switch networks and find its position again. If it takes too long, or if you get out of the monitored region before the notification is displayed, Bicyclette cancels the whole procedure.

If you need more help, please contact me by email at [support@bicyclette-app.com](mailto:support@bicyclette-app.com) or on Twitter: [@bicycletteapp](http://twitter.com/bicycletteapp).
